CREATE TABLE GRA(
id INT PRIMARY KEY,
tytul VARCHAR(50) NOT NULL,
wydawca VARCHAR(30) NOT NULL,
czas_gry VARCHAR(20),
min_graczy INT NOT NULL,
max_graczy INT NOT NULL,
min_wiek INT NOT NULL,
gatunek VARCHAR(50),
czy_dostepna BOOLEAN NOT NULL
);

CREATE TABLE WYPOZYCZAJACY(
id INT PRIMARY KEY,
imie VARCHAR(20) NOT NULL,
nazwisko VARCHAR(20) NOT NULL,
email VARCHAR(20) NOT NULL,
nr_telefonu VARCHAR(20)
);

CREATE TABLE WYPOZYCZENIE(
id INT PRIMARY KEY,
start_od DATE NOT NULL,
koniec_do DATE NOT NULL,
notatki VARCHAR(50),
FOREIGN KEY(gra_id) REFERENCES GRA(id) ON DELETE CASCADE
);

ALTER TABLE WYPOZYCZENIA ADD FOREIGN KEY (user_id) REFERENCES WYPOZYCZAJACY(id) ON DELETE CASCADE;

ALTER TABLE GRA ADD CONSTRAINT spr_czas CHECK (czas_gry >= 10);
ALTER TABLE GRA ADD CONSTRAINT spr_graczy CHECK (max_graczy >= min_graczy);
ALTER TABLE WYPOZYCZENIE ADD CONSTRAINT spr_daty CHECK (koniec_do >= start_od);
